import React from 'react'
import pairs from '../../data/goat_pairs.json'
import { track } from '../lib/analytics'
function GoatSVG({seed=0}){const ear=6+(seed%4);const horn=10+((seed*3)%6);return(<svg viewBox='0 0 100 60' width='100%' height='100%'><rect x='0' y='0' width='100' height='60' fill='none'/><circle cx='30' cy='30' r='14' stroke='#9cd3ff' fill='none' strokeWidth='2'/><path d={`M38 26 q ${horn} -10 16 0`} stroke='#e6f0f2' fill='none' strokeWidth='2'/><circle cx='26' cy='28' r='2' fill='#e6f0f2'/><circle cx='34' cy='28' r='2' fill='#e6f0f2'/><path d={`M20 20 q ${ear} -8 8 0`} stroke='#e6f0f2' fill='none' strokeWidth='2'/><rect x='50' y='34' width='28' height='10' stroke='#9cd3ff' fill='none' strokeWidth='2'/></svg>)}
export default function Goat(){const [idx,setIdx]=React.useState(0);const [score,setScore]=React.useState(0);const p=pairs[idx];function pick(which){track('goat_pick',{which,expected:p.next});if(which===p.next)setScore(s=>s+1);else setScore(s=>s-1);setIdx(i=>(i+1)%pairs.length)}return(<div className='card' style={{maxWidth:900,margin:'0 auto'}}><h2 style={{marginTop:0}}>Contrastive Goat</h2><p>Which goat came <em>next</em> in the sequence?</p><div className='grid' style={{gridTemplateColumns:'1fr 1fr'}}><div className='card'><GoatSVG seed={p.a_seed}/></div><div className='card'><GoatSVG seed={p.b_seed}/></div></div><div style={{display:'flex',gap:'.5rem',marginTop:'.75rem'}}><button className='btn' onClick={()=>pick('a')}>Left was next</button><button className='btn' onClick={()=>pick('b')}>Right was next</button></div><p style={{marginTop:'.5rem'}}>Score: {score}</p></div>)}
